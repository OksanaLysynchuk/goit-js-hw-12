{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst KEY = '42752010-70402d91d951665a6458bc92c';\nconst BASE_URI = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(BASE_URI, {\n      params: {\n        key: KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n\n    return response.data.hits;\n  } catch (error) {\n    console.log('Error while fetching images from pixabay!', error);\n    showErrorToast('Error while fetching images from pixabay!');\n\n    return error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderGallery(images) {\n  const galleryContainer = document.querySelector('.gallery');\n  const fragment = document.createDocumentFragment();\n\n  images.forEach(image => {\n    const card = document.createElement('div');\n    card.classList.add('card');\n\n    const imgLink = document.createElement('a');\n    imgLink.href = image.largeImageURL;\n    imgLink.classList.add('gallery-item');\n\n    const img = document.createElement('img');\n    img.src = image.webformatURL;\n    img.alt = image.tags;\n    img.classList.add('gallery-image');\n\n    imgLink.appendChild(img);\n    card.appendChild(imgLink);\n    fragment.appendChild(card);\n  });\n  galleryContainer.innerHTML = '';\n  galleryContainer.appendChild(fragment);\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n}\n\nexport function showLoadingIndicator() {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'block';\n}\n\nexport function hideLoadingIndicator() {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'none';\n}\n\nexport function hideLoadMoreButton() {\n  const loadMoreButton = document.querySelector('.load-more');\n  loadMoreButton.classList.add('hidden');\n  loadMoreButton.style.visibility = 'hidden';\n}\n\nexport function showLoadMoreButton() {\n  const loadMoreButton = document.querySelector('.load-more');\n  loadMoreButton.classList.remove('hidden');\n  loadMoreButton.style.visibility = 'visible';\n}\n\nexport function showEndMessage() {\n  const endMessage = document.querySelector('.end-message');\n  endMessage.classList.remove('hidden');\n  endMessage.style.visibility = 'visible';\n}\n\nexport function hideEndMessage() {\n  const endMessage = document.querySelector('.end-message');\n  endMessage.classList.add('hidden');\n  endMessage.style.visibility = 'hidden';\n}\n\nexport function showErrorToast(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n  });\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderGallery,\n  showLoadingIndicator,\n  hideLoadingIndicator,\n  hideLoadMoreButton,\n  showLoadMoreButton,\n  showErrorToast,\n  showEndMessage,\n  hideEndMessage,\n} from './js/render-functions.js';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const searchForm = document.querySelector('.search-page');\n  const searchInput = document.querySelector('.search-placeholder');\n  const loadMoreButton = document.querySelector('.load-more');\n\n  hideLoadMoreButton();\n\n  let currentPage = 1;\n  let currentQuery = '';\n  let images = [];\n\n  async function loadImages(query, page) {\n    try {\n      const response = await fetchImages(query, page);\n      return response;\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  function resetGallery() {\n    const galleryContainer = document.querySelector('.gallery');\n    galleryContainer.innerHTML = '';\n  }\n\n  async function handleSearch(event) {\n    event.preventDefault();\n    const query = searchInput.value.trim();\n\n    if (!query) {\n      showErrorToast('Please enter a search term');\n      return;\n    }\n\n    currentQuery = query;\n    currentPage = 1;\n    resetGallery();\n    showLoadingIndicator();\n    hideEndMessage();\n    hideLoadMoreButton();\n\n    try {\n      images = await loadImages(query, currentPage);\n      hideLoadingIndicator();\n      hideLoadMoreButton();\n      handleSearchResults(images);\n    } catch (error) {\n      hideLoadingIndicator();\n      showErrorToast('Error while fetching images from pixabay!');\n    }\n  }\n\n  function handleSearchResults(images) {\n    if (images.length === 0) {\n      showErrorToast(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    } else {\n      renderGallery(images);\n      if (images.length >= 15) {\n        setTimeout(() => {\n          showLoadMoreButton();\n        }, 800);\n      } else {\n        setTimeout(() => {\n          showEndMessage();\n        }, 500);\n      }\n    }\n  }\n\n  async function handleLoadMore() {\n    loadMoreButton.disabled = true;\n    hideLoadMoreButton();\n    hideEndMessage();\n    currentPage++;\n    try {\n      showLoadingIndicator();\n      const newImages = await loadImages(currentQuery, currentPage);\n      handleLoadMoreResults(newImages);\n    } catch (error) {\n      showErrorToast('Error while fetching images from pixabay!');\n    } finally {\n      hideLoadingIndicator();\n      loadMoreButton.disabled = false;\n      window.scrollBy({\n        top: window.innerHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  }\n\n  function handleLoadMoreResults(newImages) {\n    if (newImages.length === 0) {\n      showEndMessage();\n      hideLoadMoreButton();\n    } else {\n      images = images.concat(newImages);\n      renderGallery(images);\n      if (newImages.length >= 15) {\n        setTimeout(() => {\n          showLoadMoreButton();\n        }, 800);\n      } else {\n        hideLoadMoreButton();\n        setTimeout(() => {\n          showEndMessage();\n        }, 500);\n      }\n    }\n  }\n\n  function init() {\n    searchForm.addEventListener('submit', handleSearch);\n    loadMoreButton.addEventListener('click', handleLoadMore);\n  }\n\n  init();\n});\n"],"names":["KEY","BASE_URI","fetchImages","query","page","perPage","axios","error","renderGallery","images","galleryContainer","fragment","image","card","imgLink","img","SimpleLightbox","showLoadingIndicator","loader","hideLoadingIndicator","hideLoadMoreButton","loadMoreButton","showLoadMoreButton","showEndMessage","endMessage","hideEndMessage","showErrorToast","message","iziToast","searchForm","searchInput","currentPage","currentQuery","loadImages","resetGallery","handleSearch","event","handleSearchResults","handleLoadMore","newImages","handleLoadMoreResults","init"],"mappings":"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"}