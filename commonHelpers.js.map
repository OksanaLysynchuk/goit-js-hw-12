{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst KEY = '42752010-70402d91d951665a6458bc92c';\nconst BASE_URI = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(BASE_URI, {\n      params: {\n        key: KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n\n    return response.data.hits;\n  } catch (error) {\n    console.log('Error while fetching images from pixabay!', error);\n    showErrorToast('Error while fetching images from pixabay!');\n\n    return error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderGallery(images) {\n  const galleryContainer = document.querySelector('.gallery');\n  galleryContainer.innerHTML = '';\n\n  images.forEach(image => {\n    const card = document.createElement('div');\n    card.classList.add('card');\n\n    const imgLink = document.createElement('a');\n    imgLink.href = image.largeImageURL;\n    imgLink.classList.add('gallery-item');\n\n    const img = document.createElement('img');\n    img.src = image.webformatURL;\n    img.alt = image.tags;\n\n    imgLink.appendChild(img);\n    card.appendChild(imgLink);\n    galleryContainer.appendChild(card);\n  });\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n}\n\nexport function showLoadingIndicator() {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'block';\n}\n\nexport function hideLoadingIndicator() {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'none';\n}\n\nexport function hideLoadMoreButton() {\n  const loadMoreButton = document.querySelector('.load-more');\n  loadMoreButton.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  const loadMoreButton = document.querySelector('.load-more');\n  loadMoreButton.classList.remove('hidden');\n}\n\nexport function showEndMessage() {\n  const endMessage = document.querySelector('.end-message');\n  endMessage.classList.remove('hidden');\n}\n\nexport function hideEndMessage() {\n  const endMessage = document.querySelector('.end-message');\n  endMessage.classList.add('hidden');\n}\n\nexport function showErrorToast(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n  });\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderGallery,\n  showLoadingIndicator,\n  hideLoadingIndicator,\n  hideLoadMoreButton,\n  showLoadMoreButton,\n  showErrorToast,\n  showEndMessage,\n  hideEndMessage,\n} from './js/render-functions.js';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const searchForm = document.querySelector('.search-page');\n  const searchInput = document.querySelector('.search-placeholder');\n  const gallery = document.querySelector('.gallery');\n  const loadMoreButton = document.querySelector('.load-more');\n  const spinner = document.querySelector('.spinner');\n  const endMessage = document.querySelector('.end-message');\n\n  searchForm.addEventListener('submit', handleSearch);\n\n  let currentPage = 1;\n  let currentQuery = '';\n\n  async function loadImages(query, page) {\n    try {\n      const data = await fetchImages(query, page);\n      return data.hits;\n    } catch (error) {\n      showErrorToast('Error while fetching images from pixabay!');\n      throw error; // Re-throw the error to handle it properly\n    }\n  }\n\n  async function handleSearch(event) {\n    event.preventDefault();\n    gallery.innerHTML = '';\n\n    const query = searchInput.value.trim();\n\n    if (!query) {\n      showErrorToast('Please enter a search term');\n      return;\n    }\n\n    currentQuery = query;\n    currentPage = 1;\n    showLoadingIndicator();\n\n    try {\n      const images = await loadImages(query, currentPage);\n      hideLoadingIndicator();\n      if (images.length === 0) {\n        showErrorToast(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n      } else {\n        renderGallery(images);\n        showLoadMoreButton();\n      }\n    } catch (error) {\n      hideLoadingIndicator();\n      showErrorToast('Error while fetching images from pixabay!');\n    }\n  }\n\n  loadMoreButton.addEventListener('click', handleLoadMore);\n\n  async function handleLoadMore() {\n    loadMoreButton.disabled = true;\n    spinner.classList.remove('hidden');\n    currentPage++;\n    try {\n      const images = await loadImages(currentQuery, currentPage);\n      if (images.length === 0) {\n        hideLoadMoreButton();\n        showEndMessage();\n      } else {\n        renderGallery(images);\n        showLoadMoreButton();\n      }\n    } catch (error) {\n      showErrorToast('Error while fetching images from pixabay!');\n    } finally {\n      hideLoadingIndicator();\n      loadMoreButton.disabled = false;\n      window.scrollBy({\n        top: window.innerHeight * 2,\n        behavior: 'smooth',\n      });\n      hideEndMessage();\n    }\n  }\n});\n"],"names":["KEY","BASE_URI","fetchImages","query","page","perPage","axios","error","renderGallery","images","galleryContainer","image","card","imgLink","img","SimpleLightbox","showLoadingIndicator","loader","hideLoadingIndicator","hideLoadMoreButton","showLoadMoreButton","showEndMessage","hideEndMessage","showErrorToast","message","iziToast","searchForm","searchInput","gallery","loadMoreButton","spinner","handleSearch","currentPage","currentQuery","loadImages","event","handleLoadMore"],"mappings":"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"}